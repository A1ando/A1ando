<!DOCTYPE html>
<html lang="zh-CN">
<head><meta charset="UTF-8">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>艾南岛</title>
<link rel="shortcut icon" href="https://A1ando.github.io/favicon.ico?v=1605269497516">
<link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
<link href="//at.alicdn.com/t/font_1806605_dyr0fqhe85.css" rel="stylesheet">
<link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://A1ando.github.io/media/css/prism-3.css">
<style>
    @font-face {
        font-weight: normal;
        font-style: normal;
        font-family: 'charganolton';
        src: url('https://A1ando.github.io/media/fonts/Charganolton.ttf');
    }
    @font-face {
        font-weight: normal;
        font-style: normal;
        font-family: 'JetBrainsMono';
        src: url('https://A1ando.github.io/media/fonts/JetBrainsMono-Regular.eot');
        src: url('https://A1ando.github.io/media/fonts/JetBrainsMono-Regular.eot?#iefix') format('embedded-opentype'),
        url('https://A1ando.github.io/media/fonts/JetBrainsMono-Regular.woff2') format('woff2'),
        url('https://A1ando.github.io/media/fonts/JetBrainsMono-Regular.woff') format('woff'),
        url('https://A1ando.github.io/media/fonts/JetBrainsMono-Regular.ttf') format('truetype');
    }

    @font-face {
        font-weight: bold;
        font-style: normal;
        font-family: 'JetBrainsMono';
        src: url('https://A1ando.github.io/media/fonts/JetBrainsMono-Bold.eot');
        src: url('https://A1ando.github.io/media/fonts/JetBrainsMono-Bold.eot?#iefix') format('embedded-opentype'),
        url('https://A1ando.github.io/media/fonts/JetBrainsMono-Bold.woff2') format('woff2'),
        url('https://A1ando.github.io/media/fonts/JetBrainsMono-Bold.woff') format('woff'),
        url('https://A1ando.github.io/media/fonts/JetBrainsMono-Bold.ttf') format('truetype');
    }
</style>
<link rel="stylesheet" href="https://A1ando.github.io/styles/main.css">

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    
</head>
<body>

    <canvas id="canvas">
</canvas>

<div class="header">
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand" href="https://A1ando.github.io">
                <img src="https://A1ando.github.io/images/avatar.png?v=1605269497516" width="30" height="30"
                     class="d-inline-block align-top"
                     alt="">
                艾南岛
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    
                        
                            <li class="nav-item active">
                                <a class="nav-link" href="/"
                                
                                >首页</a>
                            </li>
                        
                    
                        
                            <li class="nav-item active">
                                <a class="nav-link" href="/archives"
                                
                                >归档</a>
                            </li>
                        
                    
                        
                            <li class="nav-item active">
                                <a class="nav-link" href="/tags"
                                
                                >标签</a>
                            </li>
                        
                    
                        
                            <li class="nav-item active">
                                <a class="nav-link" href="/post/about"
                                
                                >关于</a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </nav>
</div>
<div id="content" class="container">
    <div class="row">
        <div class="col-sm-100 col-lg-9">
            <div class="shadow-sm post-detail">
                <article class="post i-card">
                    <h2 class="post-title">
                        【药剂学】溶出曲线作图
                    </h2>
                    <div class="post-info">
                        <time class="post-time">2020-07-20</time>
                        
                            <a href="https://A1ando.github.io/tag/yuan-chuang/" class="post-tag i-tag
                            i-tag-banana">
                                #原创
                            </a>
                        
                            <a href="https://A1ando.github.io/tag/python/" class="post-tag i-tag
                            i-tag-other_4">
                                #python
                            </a>
                        
                            <a href="https://A1ando.github.io/tag/matplotlib/" class="post-tag i-tag
                            i-tag-other_3">
                                #matplotlib
                            </a>
                        
                            <a href="https://A1ando.github.io/tag/yao-ji-xue/" class="post-tag i-tag
                            i-tag-other_1">
                                #药剂学
                            </a>
                        
                    </div>
                    
                        <div class="post-feature-image" style="background-image: url('https://octodev.net/wp-content/uploads/2017/05/jstips-animation.gif')"></div>
                    
                    <div class="post-content">
                        <p>自用，方便快速制作溶出曲线，适用速释制剂。</p>
<!-- more -->
<h3 id="version-10">Version 1.0</h3>
<pre><code class="language-python"># -*- coding: utf-8 -*-
import matplotlib.pyplot as plt

plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

fig_title = '*************'#自定义图的标题
line_width = 1.5#自定义折线宽度
colors = ['blue', 'red', 'green']#选择折线颜色
labels = ['0.1mol/L盐酸溶液', 'pH4.5醋酸盐缓冲液', 'pH6.8磷酸盐缓冲液']#折线的标签，与图例对应
markers = ['o', '^', 's']#区分折线
plt.figure(figsize=(8, 5), dpi=120)#改变图像的长宽和dpi
plt.title(fig_title, size=16)#size可调，下同
plt.xlabel('时间(min)', size=14)
plt.ylabel('累积溶出百分率(%)', size=14)

#x轴
x = [0, 5, 10, 15, 20, 30, 60]
#0.1mol/L盐酸溶液的溶出数据
y1 = [0, 49, 87, 92, 94, 95, 96]
#pH4.5醋酸盐缓冲液的溶出数据
y2 = [0, 55, 84, 91, 94, 95, 96]
#pH6.8磷酸盐缓冲液的溶出数据
y3 = [0, 42, 79, 88, 91, 93, 95]
y = [y1, y2, y3]

#给5min和10min的点标记溶出量
def note(x, y):
    txt = [str(each) for each in y]
    for i in range(len(x)):
        if i == 1 or i == 2:
            plt.annotate(txt[i], xy=(x[i], y[i]), xytext=(x[i] + 2, y[i] - 3.2 * i))
        else:
            pass

#可选，在y=85的位置画出一条点线
#plt.plot(x, [85] * 7, linewidth=1.0, linestyle='-.', color='orange')
for i in range(len(y)):
    plt.plot(x, y[i], color=colors[i], linewidth=line_width, label=labels[i])
    plt.scatter(x, y[i], color=colors[i], linewidth=line_width, marker=markers[i])
    note(x, y[i])
#y轴刻度，增加85，方便观察15min时的溶出量是否超过85%
plt.yticks([0, 20, 40, 60, 80, 85, 100])
#plt.xticks(x)

#网格透明度为0.5，可调范围0~1
plt.grid(alpha=0.5, linestyle='--')

#显示图例
plt.legend()

#展示作图，方便再次调整保存
plt.show()
</code></pre>
<h3 id="version-20">Version 2.0</h3>
<pre><code class="language-python">#-*- coding:utf-8 -*-
'''
======================================================
2020-07-21
1、将汇总图拆分成四个子图，前三个分别与参比进行对比，最后一个汇总
2、标记子图数据
======================================================
后续计划
1、在子图空白处内嵌表格
2、模块化重新整理代码
======================================================
'''
import matplotlib.pyplot as plt

plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

batch_NO = '***'#设置批号
x = [0, 5, 10, 15, 20, 30, 60]
#参比数据，此处随机
y_refer = [[0, 30, 70, 90, 96, 18, 100],
           [0, 30, 70, 90, 96, 98, 100],
           [0, 30, 70, 90, 96, 98, 100]]
# 0.1mol/L盐酸溶液的溶出数据
y1 = [0, 49, 87, 92, 94, 95, 96]
# pH4.5醋酸盐缓冲液的溶出数据
y2 = [0, 55, 84, 91, 94, 95, 96]
#pH6.8磷酸盐缓冲液的溶出数据
y3 = [0, 42, 79, 88, 91, 93, 95]
y = [y1, y2, y3]
colors = ['g', 'r', 'b']
labels = ['0.1mol/L盐酸溶液', 'pH4.5醋酸盐缓冲液', 'pH6.8磷酸盐缓冲液', batch_NO + '批溶出汇总']
types = ['go-', 'r^-', 'bs-', 'c*-']

def init_plot(ax):
    ax.set_xlabel('时间(min)', fontsize=12)
    ax.set_ylabel('累计溶出百分率(%)', fontsize=12)
    ax.grid(alpha=0.5, linestyle='--')
    ax.axis([0, 62, 0, 105])

def custome_fig():
    fig.suptitle(batch_NO + '批溶出曲线汇总（n=？)', fontsize=20)

def note(axss, x, y):
    txt = [str(each) for each in y]
    for i in range(1, len(x)):
        axss.annotate(txt[i], xy=(x[i], y[i]), xytext=(x[i] - 3.5, y[i] - 10), \
                      arrowprops =dict(arrowstyle='-&gt;'))

def note_refer(axss, x, y):
    txt = [str(each) for each in y]
    for i in range(1, len(x)):
        axss.annotate(txt[i], xy=(x[i], y[i]), xytext=(x[i] + 0.1, y[i] + 0.1))

fig, axs = plt.subplots(2, 2,  constrained_layout=True)
custome_fig()
axss= axs.flatten()

for ax in axss:
    init_plot(ax)
    
for i in range(3):
    axss[i].plot(x, y[i], types[i], label=labels[i])
    axss[i].plot(x, y_refer[i], types[3], label='参比')
    axss[i].legend(loc='lower right')
    note(axss[i], x, y[i])
    note_refer(axss[i], x, y_refer[i])
    
for j in range(len(y)):
    axss[3].plot(x, y[j], types[j], label=labels[j])
axss[3].legend(loc='lower right')


plt.show()
</code></pre>
<h3 id="version-30">Version 3.0</h3>
<pre><code class="language-python">#-*- coding:utf-8 -*-
import matplotlib.pyplot as plt
'''
======================================================
2020-07-21
1、将汇总图拆分成四个子图，前三个分别与参比进行对比，最后一个汇总
2、标记子图数据
======================================================
2020-07-22
1、在子图空白处内嵌表格，标记可省略
2、子图4显示数据集中的位置
3、优化图例大小，画布大小
======================================================
后续计划
1、模块化重新整理代码，原始数据结构优化
2、将原始数据归档保存至csv文件或者数据库，方便调用
2、图形界面，更方便数据输入
======================================================
'''


plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

batch_NO = '******'
x = [0, 5, 10, 15, 20, 30, 60]
y_refer = [[0, 44, 84, 96, 99, 101, 101],
           [0, 35, 75, 90, 96, 99, 102],
           [0, 31, 71, 86, 93, 97, 99]]
# 0.1mol/L盐酸溶液的溶出数据
y1 = [0, 49, 87, 92, 94, 95, 96]
# pH4.5醋酸盐缓冲液的溶出数据
y2 = [0, 55, 84, 91, 94, 95, 96]
# pH6.8磷酸盐缓冲液的溶出数据
y3 = [0, 42, 79, 88, 91, 93, 95]
y = [y1, y2, y3]
colors = ['g', 'r', 'b']
labels = ['0.1mol/L盐酸溶液', 'pH4.5醋酸盐缓冲液', 'pH6.8磷酸盐缓冲液', batch_NO + '批溶出汇总']
types = ['go-', 'r^-', 'bs-', 'c*-']


table_y_vals =[[49, 87, 92, 94, 95, 96],
               [55, 84, 91, 94, 95, 96],
               [42, 79, 88, 91, 93, 95]]
table_refer_vals = [[44, 84, 96, 99, 101, 101],
                    [35, 75, 90, 96, 99, 102],
                    [31, 71, 86, 93, 97, 99]]


def init_plot(ax):
    ax.set_xlabel('时间(min)', fontsize=12)
    ax.set_ylabel('累积溶出百分率(%)', fontsize=12)
    ax.grid(alpha=0.5, linestyle='--')
    ax.axis([0, 62, 0, 105])

def custome_fig():
    fig.suptitle(batch_NO + '批包衣片溶出曲线汇总（n=6)', fontsize=20)

def note(axss, x, y):
    txt = [str(each) for each in y]
    for i in range(1, len(x)):
        axss.annotate(txt[i], xy=(x[i], y[i]), xytext=(x[i] - 3.5, y[i] - 10), arrowprops =dict(arrowstyle='-&gt;'))

def note_refer(axss, x, y):
    txt = [str(each) for each in y]
    for i in range(1, len(x)):
        axss.annotate(txt[i], xy=(x[i], y[i]), xytext=(x[i] + 0.1, y[i] + 0.1))

fig, axs = plt.subplots(2, 2,  constrained_layout=True, figsize=(9, 6), dpi=120)
custome_fig()
axss = axs.flatten()

for ax in axss:
    init_plot(ax)
for i in range(3):
    axss[i].plot(x, y[i], types[i], label=labels[i])
    axss[i].plot(x, y_refer[i], types[3], label='参比')
    axss[i].legend(loc='lower right')#, fontsize='x-large')
    #legend.get_title().set_fontsize(fontsize=30)
    the_table = axss[i].table(cellText=[table_y_vals[i], table_refer_vals[i]],
                              colWidths=[0.09]*6,
                              rowLabels=[batch_NO, '参比'],
                              colLabels=['5min', '10min', '15min', \
                                         '20min', '30min', '60min'],
                              colLoc='center',
                              rowLoc='center',
                              rowColours=['#999999', 'c'],
                              cellLoc='center',
                              loc='center right')
    the_table.auto_set_font_size(False)
    the_table.set_fontsize(11)
    the_table.scale(1.1, 1.1)
    #note(axss[i], x, y[i])
    #note_refer(axss[i], x, y_refer[i])

axss[3].axis([0, 35, 25, 100])
for j in range(len(y)):
    axss[3].plot(x, y[j], types[j], label=labels[j])
#axss[3].set_title(labels[3])
axss[3].legend(loc='lower right')#, fontsize='x-large')


plt.show()
</code></pre>
<h3 id="version-31">Version 3.1</h3>
<pre><code class="language-python"># -*- coding:utf-8 -*-
import matplotlib.pyplot as plt
import copy
'''
======================================================
2020-07-21
1、将汇总图拆分成四个子图，前三个分别与参比进行对比，最后一个汇总
2、标记子图数据
======================================================
2020-07-22
1、在子图空白处内嵌表格，标记可省略
2、子图4显示数据集中的位置
3、优化图例大小，画布大小
======================================================
2020-07-24
1、原始数据结构优化
======================================================
后续计划
1、将原始数据归档保存至csv文件或者数据库，方便调用
2、图形界面，更方便数据输入
======================================================
'''

def add_zero(a_list):
    for i in a_list:
        if isinstance(i, list):
            i.insert(0, 0)
        else:
            print(a_list, '错误')
    return a_list


def init_plot(ax):
    ax.set_xlabel('时间(min)', fontsize=12)
    ax.set_ylabel('累积溶出百分率(%)', fontsize=12)
    ax.grid(alpha=0.5, linestyle='--')
    ax.axis([0, 62, 0, 105])


def custom_fig():
    fig.suptitle(batch_NO + '批包衣片溶出曲线汇总（n=6)', fontsize=20)


def note(axes, x_axis, y_axis):
    txt = [str(each) for each in y_axis]
    for i in range(1, len(x)):
        axes.annotate(txt[i], xy=(x_axis[i], y_axis[i]),
                      xytext=(x_axis[i] - 3.5, y_axis[i] - 10),
                      arrowprops=dict(arrowstyle='-&gt;'))


def note_refer(axes, x_axis, y_axis):
    txt = [str(each) for each in y_axis]
    for i in range(1, len(x)):
        axes.annotate(txt[i], xy=(x_axis[i], y_axis[i]),
                      xytext=(x_axis[i] + 0.1, y_axis[i] + 0.1))


plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

batch_NO = '20200714-1'
# batch_NO溶出数据，[0]为'0.1mol/L盐酸溶液'，[1]为'pH4.5醋酸盐缓冲液'，[2]为'pH6.8磷酸盐缓冲液'
table_y_vals = [[49, 87, 92, 94, 95, 96],
                [55, 84, 91, 94, 95, 96],
                [42, 79, 88, 91, 93, 95]]
# 参比溶出数据，[0]为'0.1mol/L盐酸溶液'，[1]为'pH4.5醋酸盐缓冲液'，[2]为'pH6.8磷酸盐缓冲液'
table_refer_vals = [[44, 84, 96, 99, 101, 101],
                    [35, 75, 90, 96, 99, 102],
                    [31, 71, 86, 93, 97, 99]]

# 数据处理与参数设定
x = [0, 5, 10, 15, 20, 30, 60]
y_refer = add_zero(copy.deepcopy(table_refer_vals))
y1, y2, y3 = y = add_zero(copy.deepcopy(table_y_vals))
colors = ['g', 'r', 'b']
labels = ['0.1mol/L盐酸溶液', 'pH4.5醋酸盐缓冲液', 'pH6.8磷酸盐缓冲液', batch_NO + '批溶出汇总']
types = ['go-', 'r^-', 'bs-', 'c*-']

# 开始绘图
fig, axs = plt.subplots(2, 2, constrained_layout=True, figsize=(9, 6), dpi=120)
custom_fig()
axss = axs.flatten()

for ax in axss:
    init_plot(ax)
for i in range(3):
    axss[i].plot(x, y[i], types[i], label=labels[i])
    axss[i].plot(x, y_refer[i], types[3], label='参比')
    axss[i].legend(loc='lower right')  # , fontsize='x-large')
    # legend.get_title().set_fontsize(fontsize=30)
    the_table = axss[i].table(cellText=[table_y_vals[i], table_refer_vals[i]],
                              colWidths=[0.09] * 6,
                              rowLabels=[batch_NO, '参比'],
                              colLabels=['5min', '10min', '15min', '20min', '30min', '60min'],
                              colLoc='center',
                              rowLoc='center',
                              rowColours=['#999999', 'c'],
                              cellLoc='center',
                              loc='center right')
    the_table.auto_set_font_size(False)
    the_table.set_fontsize(9)
    the_table.scale(1.1, 1.1)
    # note(axss[i], x, y[i])
    # note_refer(axss[i], x, y_refer[i])

axss[3].axis([0, 32, 35, 100])
for j in range(len(y)):
    axss[3].plot(x, y[j], types[j], label=labels[j])
# axss[3].set_title(labels[3])
axss[3].legend(loc='lower right')  # , fontsize='x-large'

plt.show()
</code></pre>

                    </div>
                </article>
            </div>
            <div class="row">
                <div class="next-post col-6">
                    
                </div>
                <div class="next-post col-6">
                    
                        <div class="next">下一篇</div>
                        <a href="https://A1ando.github.io/post/XcnRl2jy4/">
                            <h3 class="post-title">
                                辅料的关键质量属性研究与控制
                            </h3>
                        </a>
                    
                </div>
            </div>
            
        </div>
        <div class="d-none d-lg-block col-lg-3">
            
                <div class="toc-card i-card shadow-sm sticky-top">
    <div class="toc-title i-card-title">目录</div>
    <div class="toc-content">
        <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#version-10">Version 1.0</a></li>
<li><a href="#version-20">Version 2.0</a></li>
<li><a href="#version-30">Version 3.0</a></li>
<li><a href="#version-31">Version 3.1</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
    <script>
        function locateCatelogList() {
            /*获取文章目录集合,可通过:header过滤器*/
            var alis = $('.post-content :header');
            /*获取侧边栏目录列表集合**/
            var sidebar_alis = $('.markdownIt-TOC a');
            /*获取滚动条到顶部的距离*/
            var scroll_height = $(window).scrollTop();
            for (var i = 0; i < alis.length; i++) {
                /*获取锚点集合中的元素分别到顶点的距离*/
                var a_height = $(alis[i]).offset().top-150;
                if (a_height < scroll_height) {
                    /*高亮显示*/
                    sidebar_alis.removeClass('on');
                    $(sidebar_alis[i]).addClass('on');
                }
            }
        }

        $(function () {
            /*绑定滚动事件 */
            $(window).bind('scroll', locateCatelogList);
        });
    </script>
</div>

            
        </div>
    </div>
    <div class="site-footer">
    Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | Theme <a href="//github.com/violetfreesia/gridea-theme-Violet" target="_blank">Violet</a>
</div>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>

    <script src="https://A1ando.github.io/media/js/TweenMax.min.js"></script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
    </script>














</div>


    <script>
        $('pre').addClass('line-numbers')
    </script>

</body>
</html>